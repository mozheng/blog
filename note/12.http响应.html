<html>
<head>
  <title>12.http响应</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/302292 (zh-CN); Windows/10.0.10586 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="481"/>
<h1>12.http响应</h1>

<div>
<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div style="widows: 1;"><font color="#545454" face="Segoe UI, Tahoma, sans-serif" size="2"><span style="white-space: pre-wrap;"><b>一、响应行</b></span></font></div><div style="widows: 1;"><ol style="box-sizing: border-box; list-style: none; padding-left: 12px; font-size: 12px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; overflow: hidden;"><div style="white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222"><img src="12.http响应_files/Image.png" type="image/png" height="320" style="cursor: default;cursor: default;cursor: default;" width="694"/></font></font></div><div style="white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222"><br/></font></font></div><div style="white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">302找别人</font></font></div><div style="white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">304,307拿缓存。</font></font></div><div style="white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">403，没权限</font></font></div><div style="white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">404，没资源</font></font></div><div style="white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">500.服务器问题</font></font></div><div style="white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">servlet方法:</font></font></div><div style="white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">用302，location做请求重定向</font></font></div><div style="text-align: left;white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">二、响应头</font></font></div><div style="text-align: left;"><ol style="text-align: -webkit-auto; box-sizing: border-box; list-style: none; padding-left: 12px;"><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><div style="box-sizing: border-box; color: rgb(84, 84, 84); display: inline-block; margin-right: 0.5em; font-weight: bold; vertical-align: top; white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">Cache-Control:</font></font></div><div style="box-sizing: border-box; font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap; display: inline; margin-right: 1em; word-break: break-all; margin-top: 1px;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">max-age=30</font></font></div></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><div style="box-sizing: border-box; color: rgb(84, 84, 84); display: inline-block; margin-right: 0.5em; font-weight: bold; vertical-align: top; white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">Connection:</font></font></div><div style="box-sizing: border-box; font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap; display: inline; margin-right: 1em; word-break: break-all; margin-top: 1px;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">keep-alive</font></font></div></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><div style="box-sizing: border-box; color: rgb(84, 84, 84); display: inline-block; margin-right: 0.5em; font-weight: bold; vertical-align: top; white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">Content-Encoding:</font></font></div><div style="box-sizing: border-box; font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap; display: inline; margin-right: 1em; word-break: break-all; margin-top: 1px;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">gzip</font></font></div></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><div style="box-sizing: border-box; color: rgb(84, 84, 84); display: inline-block; margin-right: 0.5em; font-weight: bold; vertical-align: top; white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">Content-Type:</font></font></div><div style="box-sizing: border-box; font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap; display: inline; margin-right: 1em; word-break: break-all; margin-top: 1px;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">text/html; charset=UTF-8</font> <font color="#E500FF">在conf的web里面写了Content-Type 的后缀名对应的格式</font></font></div></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><div style="box-sizing: border-box; color: rgb(84, 84, 84); display: inline-block; margin-right: 0.5em; font-weight: bold; vertical-align: top; white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">Date:</font></font></div><div style="box-sizing: border-box; font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap; display: inline; margin-right: 1em; word-break: break-all; margin-top: 1px;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">Fri, 28 Aug 2015 03:06:24 GMT</font></font></div></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><div style="box-sizing: border-box; color: rgb(84, 84, 84); display: inline-block; margin-right: 0.5em; font-weight: bold; vertical-align: top; white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">Expires:</font></font></div><div style="box-sizing: border-box; font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap; display: inline; margin-right: 1em; word-break: break-all; margin-top: 1px;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">Fri, 28 Aug 2015 03:06:54 GMT</font> <font color="#E500FF">告诉浏览器把回送的资源缓存多久， -1,0不缓存</font></font></div></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><div style="box-sizing: border-box; color: rgb(84, 84, 84); display: inline-block; margin-right: 0.5em; font-weight: bold; vertical-align: top; white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">Server:</font></font></div><div style="box-sizing: border-box; font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap; display: inline; margin-right: 1em; word-break: break-all; margin-top: 1px;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">Tengine</font> <font color="#E500FF">告诉浏览器服务器类型。</font></font></div></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><div style="box-sizing: border-box; color: rgb(84, 84, 84); display: inline-block; margin-right: 0.5em; font-weight: bold; vertical-align: top; white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">Transfer-Encoding:</font></font></div><div style="box-sizing: border-box; font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap; display: inline; margin-right: 1em; word-break: break-all; margin-top: 1px;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">chunked</font></font></div></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><div style="box-sizing: border-box; color: rgb(84, 84, 84); display: inline-block; margin-right: 0.5em; font-weight: bold; vertical-align: top; white-space: pre-wrap;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">X-Cache:</font></font></div><div style="box-sizing: border-box; font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap; display: inline; margin-right: 1em; word-break: break-all; margin-top: 1px;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">HIT from cn2-hbts-cu.hdslb.com</font></font></div></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><div style="box-sizing: border-box; font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap; display: inline; margin-right: 1em; word-break: break-all; margin-top: 1px;"><font face="Consolas, Lucida Console, monospace"><font color="#222222"><br/></font></font></div></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><div style="box-sizing: border-box; font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap; display: inline; margin-right: 1em; word-break: break-all; margin-top: 1px;"><font face="Consolas, Lucida Console, monospace"><font color="#222222">refresh：</font><font color="#E500FF">多少秒刷新一次</font></font></div></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><span style="font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap;"><font color="#222222">Content-Disposition：attachment;filename=1.jpg</font></span> <font color="#E500FF" style="font-family: Consolas, &apos;Lucida Console&apos;, monospace;">下载的方式打开文件</font></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><span style="font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap;"><font color="#222222">ETag:</font></span><font color="#E500FF" style="font-family: Consolas, &apos;Lucida Console&apos;, monospace;">缓存头，实时更新</font></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><font color="#E500FF" style="font-family: Consolas, &apos;Lucida Console&apos;, monospace;">Cache-Control：no-cache  不要缓存</font></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><span style="font-family: Consolas, &apos;Lucida Console&apos;, monospace; color: rgb(229, 0, 255);">Pragma：no-cache  不要缓存</span></li><li style="font-family: &apos;Segoe UI&apos;, Tahoma, sans-serif; box-sizing: border-box; margin-top: 1px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"><span style="font-family: Consolas, &apos;Lucida Console&apos;, monospace; color: rgb(229, 0, 255);">为了兼容以上全写。</span></li></ol><div style="text-align: -webkit-auto;"><font color="#222222" face="Consolas, Lucida Console, monospace"><span style="white-space: pre-wrap;"><br/></span></font></div><div style="text-align: -webkit-auto;"><font color="#222222" face="Consolas, Lucida Console, monospace"><span style="white-space: pre-wrap;">三、Range头，可以断点下载</span></font></div><div style="text-align: -webkit-auto;"><font color="#222222" face="Consolas, Lucida Console, monospace"><span style="white-space: pre-wrap;"><br/></span></font></div><div style="text-align: -webkit-auto;"><font color="#222222" face="Consolas, Lucida Console, monospace"><span style="white-space: pre-wrap;">
	<img src="12.http响应_files/Image_1.png" type="image/png" height="340" style="cursor: default;" width="626"/></span></font></div><div style="text-align: -webkit-auto;"><font color="#222222" face="Consolas, Lucida Console, monospace"><span style="white-space: pre-wrap;"><br/></span></font></div><div style="text-align: -webkit-auto;"><font color="#222222" face="Consolas, Lucida Console, monospace"><span style="white-space: pre-wrap;">URL url = new URL(&quot;HTTP://www&quot;);</span></font></div><div style="text-align: -webkit-auto;"><font color="#222222" face="Consolas, Lucida Console, monospace"><span style="white-space: pre-wrap;">HttpURLConnection conn = (</span></font><span style="color: rgb(34, 34, 34); font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap;">HttpURLConnection) url.openConnection();</span></div><div style="text-align: -webkit-auto;"><span style="color: rgb(34, 34, 34); font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap;">conn.setRequestProperty(&quot;Range&quot;,&quot;bytes=5-&quot;);//tomcat5以后的服务器</span><span style="color: rgb(34, 34, 34); font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap;">支持Range头。</span><span style="color: rgb(34, 34, 34); font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap;">直接从5后下载。</span></div><div style="text-align: -webkit-auto;"><span style="color: rgb(34, 34, 34); font-family: Consolas, &apos;Lucida Console&apos;, monospace; white-space: pre-wrap;"><br/></span></div><div style="text-align: -webkit-auto;"><font color="#222222" face="Consolas, Lucida Console, monospace"><span style="white-space: pre-wrap;"><br/></span></font></div><div style="text-align: -webkit-auto;"><font color="#222222" face="Consolas, Lucida Console, monospace"><span style="white-space: pre-wrap;"><br/></span></font></div><div style="text-align: -webkit-auto;"><font color="#222222" face="Consolas, Lucida Console, monospace"><span style="white-space: pre-wrap;"><br/></span></font></div><div style="text-align: -webkit-auto;"><font color="#222222" face="Consolas, Lucida Console, monospace"><span style="white-space: pre-wrap;"><br/></span></font></div></div></li></ol></div></span>
</div></body></html> 