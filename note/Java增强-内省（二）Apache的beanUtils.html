<html>
<head>
  <title>Java增强-内省（二）Apache的beanUtils</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/302292 (zh-CN); Windows/10.0.10586 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="546"/>
<h1>Java增强-内省（二）Apache的beanUtils</h1>

<div>
<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">
一.Apache开发beanUtils，操作bean，这种这种开发很便利。
<div align="left"><font face="Consolas" size="2"><span style="font-size:10pt">       </span></font> <font color="#7F0055" face="Consolas" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Consolas" size="2"><span style="font-size:10pt">test()</span></font> <font color="#7F0055" face="Consolas" size="2"><span style="font-size:10pt"><b>throws</b></span></font> <font face="Consolas" size="2"><span style="font-size:10pt">IllegalAccessException, InvocationTargetException</span></font></div><div align="left"><font face="Consolas" size="2"><span style="font-size:10pt">       {</span></font></div><div align="left"><font face="Consolas" size="2"><span style="font-size:10pt">              Person</span></font> <font color="#6A3E3E" face="Consolas" size="2"><span style="font-size:10pt">p</span></font> <font face="Consolas" size="2"><span style="font-size:10pt">=</span></font> <font color="#7F0055" face="Consolas" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Consolas" size="2"><span style="font-size:10pt">Person();</span></font></div><div align="left"><font face="Consolas" size="2"><span style="font-size:10pt">              BeanUtils.</span> <span style="font-size:10pt"><i>setProperty</i></span><span style="font-size:10pt">(</span></font><font color="#6A3E3E" face="Consolas" size="2"><span style="font-size:10pt">p</span></font><font face="Consolas" size="2"><span style="font-size:10pt">,</span></font> <font color="#2A00FF" face="Consolas" size="2"><span style="font-size:10pt">&quot;name&quot;</span></font><font face="Consolas" size="2"><span style="font-size:10pt">,</span></font> <font color="#2A00FF" face="Consolas" size="2"><span style="font-size:10pt">&quot;xxc&quot;</span></font><font face="Consolas" size="2"><span style="font-size:10pt">);</span></font></div><div align="left"><font face="Consolas" size="2"><span style="font-size:10pt">              System.</span></font> <font color="#0000C0" face="Consolas" size="2"><span style="font-size:10pt"><b><i>out</i></b></span></font><font face="Consolas" size="2"><span style="font-size:10pt">.println(</span></font><font color="#6A3E3E" face="Consolas" size="2"><span style="font-size:10pt">p</span></font> <font face="Consolas" size="2"><span style="font-size:10pt">.getName());</span></font><span style="font-size: 10pt; font-family: Consolas;">     </span></div><div align="left"><font face="Consolas" size="2"><span style="font-size:10pt">       }</span></font></div><div align="left"><font face="Consolas">二.beanutils仅支持8种类型转化</font></div><div align="left"><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font color="#3F7F5F" face="Courier New" size="2"><span style="font-size:10pt">///设置转换器，因为</span> <span style="font-size:10pt"><u>beanutils</u></span><span style="font-size:10pt">仅支持基本转换</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font color="#646464" face="Courier New" size="2"><span style="font-size:10pt">@Test</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test2()</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">      {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            ConvertUtils.</span> <span style="font-size:10pt"><i>register</i></span><span style="font-size:10pt">(</span></font><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Converter(){</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><u>Object</u></span> <span style="font-size:10pt">convert(</span> <span style="font-size:10pt"><u>Class</u></span></font> <font color="#6A3E3E" face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">, Object</span></font> <font color="#6A3E3E" face="Courier New" size="2"><span style="font-size:10pt">value</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">)</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                  {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        </span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(</span></font><font color="#6A3E3E" face="Courier New" size="2"><span style="font-size:10pt">value</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">==</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>null</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">)</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                              </span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>null</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        </span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(!(</span></font><font color="#6A3E3E" face="Courier New" size="2"><span style="font-size:10pt">value</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>instanceof</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String))</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                              </span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>throw</b></span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ConversionException(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;仅仅支持String&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        }</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        String</span></font> <font color="#6A3E3E" face="Courier New" size="2"><span style="font-size:10pt">str</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=(String)</span></font><font color="#6A3E3E" face="Courier New" size="2"><span style="font-size:10pt">value</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        </span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(</span></font><font color="#6A3E3E" face="Courier New" size="2"><span style="font-size:10pt">str</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.trim().equals(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">))</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                              </span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>null</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        SimpleDateFormat</span></font> <font color="#6A3E3E" face="Courier New" size="2"><span style="font-size:10pt">df</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">SimpleDateFormat(</span></font><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt">&quot;yyyy-MM-dd&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        </span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>try</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                              </span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font color="#6A3E3E" face="Courier New" size="2"><span style="font-size:10pt">df</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.parse(</span></font><font color="#6A3E3E" face="Courier New" size="2"><span style="font-size:10pt">str</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        }</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        </span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>catch</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">(ParseException</span></font> <font color="#6A3E3E" face="Courier New" size="2"><span style="font-size:10pt">e</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">)</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        {</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                              </span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>throw</b></span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">RuntimeException();</span></font><font color="#3F7F5F" face="Courier New" size="2"><span style="font-size:10pt">//异常链不能断</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                        }</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                  }</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            }, Date.</span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font face="Courier New">三.将map整合到bean</font></div><div align="left"><font face="Courier New"><br/></font></div><div align="left"><font face="Courier New"><br/></font></div><div align="left"><font face="Courier New"><br/></font></div></div></span>
</div></body></html> 